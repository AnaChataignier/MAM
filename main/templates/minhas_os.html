<!doctype html>
<html lang="en" data-bs-theme="auto">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="J.M.Campos">
    <meta name="generator" content="DGBZ">
    <title>App Mamminfo</title>
    <link rel="canonical" href="">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <link href="/static/assets/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="/static/assets/css/app_mamminfo.css" rel="stylesheet">
    <style>
      /* Estilo para status Urgente (Vermelho) */
.color-red {
    color: red;
}

/* Estilo para status Atenção (Amarelo) */
.color-yellow {
    color: #ffae00;
}

/* Estilo para status Aguardando (Azul) */
.color-blue {
    color: blue;
}

    </style>
  </head>

  <body>

    <main class="bg03">

      <header>
        <div class="container">
          <div id="super_menu">
            <div class="row">
              <div class="col-3 text-start">
                <i class="bi bi-justify i_main"></i>
              </div>
              <div class="col-9 text-end">
                <p class="mt-2">
                  Olá,<br>
                  <strong>Joaquim José da Silva Xavier</strong>
                </p>
                <div class="photo_user mt-1">
                  <img src="https://images.unsplash.com/photo-1633332755192-727a05c4013d?auto=format&fit=crop&q=80&w=1760&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
                </div>
              </div>
            </div>
            <button class="" type="button" data-bs-toggle="collapse" data-bs-target="#col_menu_main" aria-expanded="false" aria-controls="collapseExample"></button>
            <div class="collapse" id="col_menu_main">
              <div class="card card-body box-shadow">
                <ul>
                  <!-- Botao caso app tenha fechado e user precisa voltar para OS que ja estava em andamento -->
                  <li><a href="tela_os-aguardando.html" class="font-medium text-light bg02 p-2"><i class="bi bi-arrow-return-left"></i> Retomar atual Ocorrência</a></li>
                  <!-- Botao caso app tenha fechado e user precisa voltar para OS que ja estava em andamento -->
                  <li><a href="tela_dashboard.html" class="font-medium color04"><i class="bi bi-house"></i> Dashboard</a></li>
                  <hr>
                  <li><a href="tela_lista_ocs_dia.html" class="font-medium color04"><i class="bi bi-card-heading"></i> Lista de Ocorrências</a></li>
                  <li><a href="tela_lista_ocs_urgentes.html" class="font-medium color04"><i class="bi bi-exclamation-triangle-fill"></i> Ocorrências Urgentes</a></li>
                  <li><a href="tela_lista_ocs_atencao.html" class="font-medium color04"><i class="bi bi-flag-fill"></i> Ocorrências em Atenção</a></li>
                  <hr>
                  <li><a href="tela_busca.html" class="font-medium color04"><i class="bi bi-search"></i> Busca</a></li>
                  <li><a href="tela_user.html" class="font-medium color04"><i class="bi bi-gear-fill"></i> Configurações</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </header>

      <section id="lista_oc_scr">
        <div class="container">

          

            
            <!-- Lista das OS -->
            <div id="oc_lista">
                <label class="mt-1 mb-2 ms-2 font-medium color04"><i class="bi bi-bi bi-card-heading"></i> Lista das Ordens de Serviço:</label>
                
                <form id="filter_oc" class="bg04 p-2">
                  <div class="row">
                    <div class="col-6">
                      <div class="row">
                        <div class="col-2 text-end">
                          <i class="bi bi-calendar-week color03 me-1"></i>
                        </div>
                        <div class="col-10 p-0">
                          <select class="form-control ms-1" id = 'date-filter'>
                            <option selected>Selecione</option>
                            <option>Hoje</option>
                            <option>Ontem</option>
                            <option>Últimos 7 dias</option>
                            <option>Últimos 30 dias</option>
                          </select>
                        </div>
                      </div>                      
                    </div>
                    <div class="col-6">
                      <div class="row">
                        <div class="col-2 text-end">
                          <i class="bi bi-bar-chart-fill color03 me-1"></i>
                        </div>
                        <div class="col-10 p-0">
                          <select class="form-control ms-1" id='status-filter'>
                            <option selected>Selecione</option>
                            <option>Todas </option>
                            <option>Urgente</option>
                            <option>Atenção</option>
                            <option>Aguardando</option>
                            <option>Concluído</option>
                          </select>
                        </div>
                      </div>                      
                    </div>
                  </div>
                </form>
                <script>
                  document.addEventListener("DOMContentLoaded", function () {
                      const selectStatus = document.querySelector('#status-filter');
                      const selectDate = document.querySelector('#date-filter');
 // Obtém o elemento select
              
                      selectStatus.addEventListener('change', function () {
                          const selectedStatus = selectStatus.value; // Obtém o valor selecionado
              
                          window.location.href = window.location.pathname + '?status=' + selectedStatus; // Atualiza a URL para acionar a view com o filtro de status
                      });
                      selectDate.addEventListener('change', function () {
                        const selectedDate = selectDate.value;
                        window.location.href = window.location.pathname + '?previsao_chegada=' + selectedDate;
                    });
                  });
              </script>
                <div class="tab-pane fade show active" id="pills-01" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
                  <!-- OS Urgente -->
                  {% for ordem in ordens_de_servico %}
                  <div class="oc_lista_item">
                      <a href="{% url 'os_detail' ordem.id %}" class="a-whole"></a>
                      <div class="row">
                          <div class="col-2 col-md-1">
                              <div class="icon bg-light"><i class="bi bi-briefcase text-dark"></i></div>
                          </div>
                          <div class="col-9 col-md-11">
                              <div class="oc_l_data color04 font-light">Previsão de chegada - {{ ordem.previsao_chegada }}</div>
                              <div class="oc_l_nome font-medium color04">Ticket #{{ ordem.ticket }}</div>
                              <div class="oc_l_status font-medium {% if ordem.status == 'Urgente' %}color-red{% elif ordem.status == 'Atenção' %}color-yellow{% elif ordem.status == 'Aguardando' %}color-blue{% endif %}">{{ ordem.status }}</div>
                          </div>
                          {% if ordem.status == "Urgente" %}
                              <div class="status_icon bg05 text-light">
                                  <i class="bi bi-exclamation-triangle-fill"></i>
                              </div>
                          {% elif ordem.status == "Atenção" %}
                              <div class="status_icon bg06 text-dark">
                                  <i class="bi bi-flag"></i>
                              </div>
                          {% elif ordem.status == "Aguardando" %}
                              <div class="status_icon bg01 text-light">
                                  <i class="bi bi-clock"></i>
                              </div>
                          {% endif %}
                      </div>
                  </div>
                  {% endfor %}
                       
              </div>
            <!-- Lista das OS -->
        </div>
      </section>
      
    </main>

    <footer>
      <ul class="row">
        <li class="col-3 mt-1"><a href="{% url 'dashboard' %}"><i class="bi bi-house"></i></a></li>
        <li class="col-3 p-0 mt-1 text-start text-md-center"><a href="{% url 'minhas_os' %}" class="text-start text-md-center"><i class="bi bi-card-text"></i></a></li>
        <li class="col-3 p-0 mt-1 text-end text-md-center"><a href="tela_busca.html" class="text-end text-md-center"><i class="bi bi-search"></i></a></li>
        <li class="col-3 mt-1"><a href="tela_user"><i class="bi bi-person-gear"></i></a></li>

      </ul>

    
  </footer>

    <script src="/static/assets/dist/js/bootstrap.bundle.min.js"></script>

  </body>

  </html>
