{% extends "base2.html" %}

{%load static%}
{% block rest %}
      <section id="dashboard_scr">
        <div class="container">
            
          <div class="busca">
            <form>
              <input type="text" class="form-control" name="busca_main" placeholder="Busca">
              <button type="submit"><i class="bi bi-search"></i></button>
            </form>
            </div>
            
          <!-- Boxes dos últimos dias - Máximo de 5 boxes -->
          <div class="oc_dia">
            <label class="mt-2 font-medium color04">Datas:</label>
            <div class="boxes">
              <div class="box">
                <a href="tela_lista_ocs_dia.html"></a>
                <div class="box_upper">
                  <div class="icon bg01"><i class="bi bi-calendar-week text-light"></i></div>
                  <div class="data color01"><small>HOJE</small></div>
                </div>
                <div class="box_mid">
                  <i class="bi bi-briefcase"></i>
                  <div class="qtd font-bold color04">{{total_ordens_today}}</div>
                  <p>Ordens<br>de Serviço</p>
                </div>
                  <hr>
                  <div class="box_below">
                      <ul>
                        <li class="color04"><i class="bi bi-circle-fill color02"></i> <strong>12</strong> Realizadas</li>
                        <li class="color04"><i class="bi bi-circle-fill color05"></i> <strong>02</strong> Atrasadas</li>
                        <li class="color04"><i class="bi bi-circle-fill color01"></i> <strong>06</strong> Aguardando</li>
                      </ul>
                  </div>
              </div>
              <div class="box box_past">
                <a href="tela_lista_ocs_dia.html"></a>
                <div class="box_upper">
                  <div class="icon bg03"><i class="bi bi-calendar-week text-light"></i></div>
                  <div class="data color04"><small>ONTEM</small></div>
                </div>
                <div class="box_mid">
                  <i class="bi bi-briefcase"></i>
                  <div class="qtd font-bold color04">{{total_ordens_yesterday}}</div>
                  <p>Ordens<br>de Serviço</p>
                </div>
                  <hr>
                  <div class="box_below">
                      <ul>
                        <li class="color04"><i class="bi bi-circle-fill color02"></i> <strong>13</strong> Realizadas</li>
                        <li class="color04"><i class="bi bi-circle-fill color03"></i> <strong>02</strong> Não realizadas</li>
                      </ul>
                  </div>
              </div>
              <div class="box box_past">
                <a href="tela_lista_ocs_dia.html"></a>
                <div class="box_upper">
                  <div class="icon bg03"><i class="bi bi-calendar-week text-light"></i></div>
                  <div class="data color04"><small>{{day_before_yesterday}}</small></div>
                </div>
                
                <div class="box_mid">
                  <i class="bi bi-briefcase"></i>
                  <div class="qtd font-bold color04">{{total_ordens_day_before_yesterday}}</div>
                  <p>Ordens<br>de Serviço</p>
                </div>
                  <hr>
                  <div class="box_below">
                      <ul>
                        <li class="color04"><i class="bi bi-circle-fill color02"></i> <strong>18</strong> Realizadas</li>
                      </ul>
                  </div>
              </div>
             <div class="box box_past">
                <a href="tela_lista_ocs_dia.html"></a>
                <div class="box_upper">
                  <div class="icon bg03"><i class="bi bi-calendar-week text-light"></i></div>
                  <div class="data color04"><small>{{three_days_ago}}</small></div>
                </div>
                <div class="box_mid">
                  <i class="bi bi-briefcase"></i>
                  <div class="qtd font-bold color04">{{total_ordens_three_days_ago}}</div>
                  <p>Ordens<br>de Serviço</p>
                </div>
                  <hr>
                  <div class="box_below">
                      <ul>
                        <li class="color04"><i class="bi bi-circle-fill color02"></i> <strong>11</strong> Realizadas</li>
                        <li class="color04"><i class="bi bi-circle-fill color03"></i> <strong>01</strong> Não realizadas</li>
                      </ul>
                  </div>
              </div>
              <div class="box box_past">
                <a href="tela_lista_ocs_dia.html"></a>
                <div class="box_upper">
                  <div class="icon bg03"><i class="bi bi-calendar-week text-light"></i></div>
                  <div class="data color04"><small>{{four_days_ago}}</small></div>
                </div>
                <div class="box_mid">
                  <i class="bi bi-briefcase"></i>
                  <div class="qtd font-bold color04">{{total_ordens_four_days_ago}}</div>
                  <p>Ordens<br>de Serviço</p>
                </div>
                  <hr>
                  <div class="box_below">
                      <ul>
                        <li class="color04"><i class="bi bi-circle-fill color02"></i> <strong>13</strong> Realizadas</li>
                        <li class="color04"><i class="bi bi-circle-fill color03"></i> <strong>02</strong> Não realizadas</li>
                      </ul>
                  </div>
              </div>
            </div>     
          </div>
          <!-- Boxes dos últimos dias -->
         
            <!-- Chart das OS -->
            <div class="oc_chart">
                <div class="chart_box bg04 box-shadow">
                    <img src="{% static 'assets/img/image-graph.png'%}" alt="">
                    <div class="bar_info">
                        <label class="font-medium color03">Resumo <span class="font-regular">do dia:</span></label>
                        <div class="bar">
                          <span class="bg01" style="width: {{percent_aguardando}}%;"></span>
                          <span class="bg02" style="width: {{percent_concluido}}%;"></span>
                          <span class="bg06" style="width: {{percent_atencao}}%;"></span>
                          <span class="bg05" style="width: {{percent_urgente}}%;"></span>
                        </div>
                        <label class="label01 font-regular color03">
                            <span>
                                <span class="color01 font-bold">{{percent_aguardando}}%</span> Aguardando
                            </span>
                            <span>
                                <span class="color02 font-bold">{{percent_concluido}}%</span> Realizadas
                            </span>
                            <span>
                                <span class="color06 font-bold">{{percent_atencao}}%</span> Atenção
                            </span>
                            <span>
                                <span class="color05 font-bold">{{percent_urgente}}%</span> Urgente
                            </span>
                        </label>
                    </div>
                </div>
            </div>
            <!-- Chart das OS -->
            
            <!-- Lista das OS -->
            <div id="oc_lista">
                <label class="mt-2 font-medium color04">Todas suas OS:</label>
                <div class="listas_here box-shadow">
                    <ul class="nav nav-pills" id="pills-tab" role="tablist">
                      <li class="nav-item" role="presentation">
                        <button class="nav-link active font-medium" id="pills-01-tab" data-bs-toggle="pill" data-bs-target="#pills-01" type="button" role="tab" aria-controls="pills-01" aria-selected="true">Não realizadas</button>
                      </li>
                      <li class="nav-item" role="presentation">
                        <button class="nav-link font-medium" id="pills-02-tab" data-bs-toggle="pill" data-bs-target="#pills-02" type="button" role="tab" aria-controls="pills-02" aria-selected="false">Realizadas</button>
                      </li>
                    </ul>
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-01" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
                            <!-- OS Urgente -->
                            {% for ordem in ordens_ativas_hoje %}
                            <div class="oc_lista_item">
                                <a href="{% url 'os_detail' ordem.id %}" class="a-whole"></a>
                                <div class="row">
                                    <div class="col-2 col-md-1">
                                        <div class="icon bg-light"><i class="bi bi-briefcase text-dark"></i></div>
                                    </div>
                                    <div class="col-9 col-md-11">
                                        <div class="oc_l_data color04 font-light">Previsão de chegada - {{ ordem.previsao_chegada }}</div>
                                        <div class="oc_l_nome font-medium color04">Ticket #{{ ordem.ticket }}</div>
                                        <div class="oc_l_status font-medium {% if ordem.status == 'Urgente' %}color-red{% elif ordem.status == 'Atenção' %}color-yellow{% elif ordem.status == 'Aguardando' %}color-blue{% endif %}">{{ ordem.status }}</div>
                                    </div>
                                    {% if ordem.status == "Urgente" %}
                                        <div class="status_icon bg05 text-light">
                                            <i class="bi bi-exclamation-triangle-fill"></i>
                                        </div>
                                    {% elif ordem.status == "Atenção" %}
                                        <div class="status_icon bg06 text-dark">
                                            <i class="bi bi-flag"></i>
                                        </div>
                                    {% elif ordem.status == "Aguardando" %}
                                        <div class="status_icon bg01 text-light">
                                            <i class="bi bi-clock"></i>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                            {% endfor %}
                                 
                        </div>

                        <div class="tab-pane fade" id="pills-02" role="tabpanel" aria-labelledby="pills-02-tab" tabindex="0">
                          {% for ordem in ordens_finalizadas_hoje %}
                          <!-- OS Realizada -->
                          <div class="oc_lista_item">
                              <a href="tela_os_realizada.html" class="a-whole"></a>
                              <div class="row">
                                  <div class="col-2 col-md-1">
                                      <div class="icon bg-light"><i class="bi bi-briefcase text-dark"></i></div>
                                  </div>
                                  <div class="col-9 col-md-11">
                                      <div class="oc_l_data color04 font-light">Previsão de Chegada - {{ordem.previsao_chegada}}</div>
                                      <div class="oc_l_nome font-medium color04">Ticket #{{ordem.ticket}}</div>
                                      <div class="oc_l_status font-medium color02">{{ordem.status}}</div>
                                  </div>
                                  <div class="status_icon bg02 text-light">
                                      <i class="bi bi-check-circle"></i>
                                  </div>
                              </div>
                          </div>
                          <!-- OS Realizada -->
                          {% endfor %}
                      </div>
                </div>
            </div>
            <!-- Lista das OS -->
            
        </div>
      </section>
      {% endblock %}